# نظام إدارة النصائح والملاحظات

## نظرة عامة
تم إنشاء نظام شامل لإدارة نصائح العملاء وملاحظاتهم لتحسين الخدمات، مع إمكانية منح خصم 10% للعملاء الذين يشاركون نصائحهم.

## الميزات المضافة

### 1. مودال طلب النصائح (`FeedbackModal.tsx`)
- **الموقع**: `src/components/FeedbackModal.tsx`
- **الوظائف**:
  - نموذج لطلب النصائح من العملاء
  - حقول: الاسم، البريد الإلكتروني، الهاتف (اختياري)، الرسالة
  - عرض رسالة نجاح مع وعد بخصم 10%
  - تصميم متجاوب وجذاب

### 2. API Endpoints
- **POST `/api/feedback`**: إرسال نصيحة جديدة
- **GET `/api/feedback`**: جلب النصائح مع فلترة وتصفح
- **PATCH `/api/feedback/[id]`**: تحديث حالة النصيحة أو إضافة ملاحظات إدارية
- **DELETE `/api/feedback/[id]`**: حذف النصيحة

### 3. صفحة إدارة النصائح (`/admin/feedback`)
- **الموقع**: `src/app/admin/feedback/page.tsx`
- **الوظائف**:
  - عرض جميع النصائح مع التصفح
  - فلترة حسب الحالة (معلق، تم المراجعة، تم الرد، مغلق)
  - إضافة ملاحظات إدارية
  - تحديث حالة النصائح
  - حذف النصائح
  - تصميم متجاوب مع واجهة سهلة الاستخدام

### 4. دمج في صفحة التسعير
- **الموقع**: `src/app/pricing/page.tsx`
- **التحسينات**:
  - إضافة قسم CTA جذاب في أعلى الصفحة
  - زر "أخبرنا بنصيحتك واحصل على خصم 10%" في قسم CTA السفلي
  - دمج المودال مع الصفحة

### 5. قاعدة البيانات
- **جدول جديد**: `feedback`
- **الحقول**:
  - `id`: معرف فريد
  - `name`: اسم العميل
  - `email`: البريد الإلكتروني
  - `phone`: رقم الهاتف (اختياري)
  - `message`: نصيحة العميل
  - `status`: حالة النصيحة (PENDING, REVIEWED, RESPONDED, CLOSED)
  - `adminNotes`: ملاحظات الإدارة
  - `createdAt`: تاريخ الإنشاء
  - `updatedAt`: تاريخ التحديث

## كيفية الاستخدام

### للعملاء:
1. زيارة صفحة التسعير
2. النقر على "شارك نصيحتك الآن" أو "أخبرنا بنصيحتك واحصل على خصم 10%"
3. ملء النموذج وإرسال النصيحة
4. الحصول على وعد بخصم 10% على الطلب القادم

### للإدارة:
1. تسجيل الدخول إلى لوحة الإدارة
2. الانتقال إلى "إدارة النصائح"
3. مراجعة النصائح الجديدة
4. إضافة ملاحظات إدارية
5. تحديث حالة النصائح (مراجعة → رد → إغلاق)
6. حذف النصائح غير المرغوب فيها

## حالات النصائح

1. **PENDING (معلق)**: النصيحة الجديدة التي لم يتم مراجعتها
2. **REVIEWED (تم المراجعة)**: تمت مراجعة النصيحة من قبل الإدارة
3. **RESPONDED (تم الرد)**: تم الرد على العميل
4. **CLOSED (مغلق)**: تم إغلاق الملف

## الأمان والتحقق
- التحقق من صحة البريد الإلكتروني
- التحقق من البيانات المطلوبة
- معالجة الأخطاء بشكل صحيح
- حماية من SQL Injection باستخدام Prisma

## التصميم
- تصميم متجاوب يعمل على جميع الأجهزة
- استخدام خط Tajawal للنصوص العربية
- ألوان متناسقة مع هوية الموقع
- واجهة سهلة الاستخدام ومفهومة

## الملفات المضافة/المعدلة

### ملفات جديدة:
- `src/components/FeedbackModal.tsx`
- `src/app/api/feedback/route.ts`
- `src/app/api/feedback/[id]/route.ts`
- `src/app/admin/feedback/page.tsx`
- `FEEDBACK_SYSTEM_README.md`

### ملفات معدلة:
- `prisma/schema.prisma` - إضافة جدول Feedback و enum FeedbackStatus
- `src/app/admin/layout.tsx` - إضافة رابط إدارة النصائح
- `src/app/pricing/page.tsx` - دمج المودال وإضافة أزرار CTA

## الخطوات التالية المقترحة
1. اختبار النظام في بيئة الإنتاج
2. إضافة إشعارات للإدارة عند وصول نصائح جديدة
3. إضافة نظام إرسال ردود تلقائية للعملاء
4. إضافة إحصائيات وتحليلات للنصائح
5. إضافة نظام تقييم النصائح من قبل الإدارة
